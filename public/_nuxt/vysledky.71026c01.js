import{u as D}from"./fetch.db9540ed.js";import{q as A,u as b,C as $,c as s,a as r,F as m,D as p,v as k,o,t as u,d as c}from"./entry.04dbe281.js";const B={class:"u-full-width"},C=r("th",null,null,-1),U=["src"],j={key:0},F={key:1},H={key:2},V={key:3},x=r("br",null,null,-1),E={key:0},L=r("br",null,null,-1),O={key:1},R=r("br",null,null,-1),q={key:2},Y=A({__name:"vysledky",async setup(I){let d,h;const y=b(),{data:_}=([d,h]=$(()=>D("/api/team-actions-all",{headers:{Authorization:`Bearer ${y.jwt}`}},"$UwYhJumVlH")),d=await d,h(),d),v=_.teamActions=Object.fromEntries(Object.entries(_.value.teamActions).sort(([,t],[,e])=>t.solved<e.solved?1:t.solved>e.solved?-1:new Date(t.time).getTime()-new Date(e.time).getTime()));function f(t){return new Date(t).toLocaleString("cs-CZ",{weekday:"long",hour:"numeric",minute:"numeric"})}function w(t=[]){return t.some(e=>e.action==="unlocked")}function S(t=[]){return t.some(e=>e.action==="solved")}function z(t=[]){const e=t.find(l=>l.action==="solved"),n=t.find(l=>l.action==="unlocked"),a=new Date(new Date(e.timestamp).getTime()-new Date(n.timestamp).getTime());return g(a)}function T(t=[]){const e=t.find(n=>n.action==="unlocked");return f(e.timestamp)}function g(t){if(!t)return"";const e=(t.getDate()-1)*24,n=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");return`${String(t.getHours()-1+e).padStart(2,"0")}:${n}:${a}`}return(t,e)=>(o(),s("table",B,[r("thead",null,[r("tr",null,[C,(o(!0),s(m,null,p(k(_).puzzles,n=>(o(),s("th",{key:n.url},[r("img",{src:n.logoUrl,class:"logoResults"},null,8,U)]))),128))])]),r("tbody",null,[(o(!0),s(m,null,p(k(v),(n,a,l)=>(o(),s("tr",{key:a},[r("td",null,[l==0?(o(),s("span",j,"🥇")):l==1?(o(),s("span",F,"🥈")):l==2?(o(),s("span",H,"🥉")):(o(),s("span",V,u(l+1)+". ",1)),r("strong",null,u(a),1),c(),x,c(" "+u(n.solved)+" šifer v čase "+u(g(new Date(n.time))),1)]),(o(),s(m,null,p(16,i=>r("td",{key:a+i},[S(n.puzzles[i])?(o(),s("span",E,[c(" ✅ "),L,c(" "+u(z(n.puzzles[i])),1)])):w(n.puzzles[i])?(o(),s("span",O,[c(" 🔓 "),R,c(" "+u(T(n.puzzles[i])),1)])):(o(),s("span",q," 🔒 "))])),64))]))),128))])]))}});export{Y as default};
